# Change Log: Login Loop Prevention & Error Handling

**Date:** 2026-02-06
**Time:** 19:00
**Author:** Gemini Agent

## Description
Implemented robust error handling in the frontend authentication flow to prevent "Login Loops" (immediate logout after login) caused by network errors or server glitches.

## Changes
- **File:** `dist/script.js`
    -   **Update:** `FidaAPI.auth.getMe` now throws specific errors (`Unauthorized` vs `Server Error`) based on HTTP status code.
    -   **Update:** `checkAuth` only triggers `logout()` if the error is explicitly `Unauthorized` (401/403) or `No token found`. Other errors (e.g., 500, Network) trigger a Toast notification instead of a session reset.
- **File:** `dist/index.html`
    -   **Update:** Appended `?v=2` to `script.js` inclusion to force browser cache invalidation.

## Rationale
Previously, *any* error during the `getMe` session check (including transient network issues or CORS failures) triggered `logout()`, causing the user to be redirected back to the login page immediately. This change ensures that only true authentication failures cause a logout, allowing for better diagnosis and user experience.

## Verification
-   **Manual Test:** Disconnect DB or Network -> Reload App -> Should stay on Index with "Connection Error" toast, not redirect to Login.
-   **Manual Test:** Login normally -> Should succeed.
