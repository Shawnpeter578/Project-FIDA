# Change Log: Fix Google Sign-In Role Mapping

**Date:** 2026-02-06
**Time:** 18:00
**Author:** Gemini Agent

## Description
Fixed a critical bug in `dist/login.html` where Google Sign-In was sending incorrect role identifiers to the backend and failing to validate user roles upon login.

## Changes
- **File:** `dist/login.html`
- **Function:** `handleGoogleCredentialResponse`
- **Modifications:**
    1.  **Role Mapping (Request):** Now correctly maps the frontend role `'host'` to the backend role `'organizer'` before sending the API request. This ensures new organizers are created with the correct privileges.
    2.  **Role Validation (Response):** Added a check to verify that the role returned by the backend matches the currently selected tab. If there is a mismatch (e.g., a Fan trying to log in via the Organizer tab), the login is blocked with an error message, preventing the dashboard lockout loop.

## Rationale
The previous implementation sent `'host'` directly to the backend, which defaulted it to `'user'`, creating corrupted accounts. It also lacked validation, allowing users to enter a redirect loop.

## Verification
- **Manual Verification Required:**
    -   Sign up as an Organizer with a new Google account -> Should land on Dashboard.
    -   Sign in as a Fan on the Organizer tab -> Should see error message.
