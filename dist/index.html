<!DOCTYPE html>
<html lang="en">
<head>
    <script>
        if (!localStorage.getItem('fida_token')) { window.location.href = 'login.html'; }
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>GigByCity | Ultra UI</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;700&family=Libre+Barcode+128+Text&display=swap" rel="stylesheet">

    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

    <link rel="stylesheet" href="style.css">
    <script defer src="script.js"></script>
</head>
<body>

  <div id="splashScreen">
    <div class="splash-logo">GigByCity</div>
    <div class="splash-loader"></div>
  </div>

  <div id="onboardingModal">
      <div class="onboarding-slide active" data-step="0">
          <img src="https://i.pinimg.com/1200x/75/eb/9c/75eb9cc57a2da1012e5303011c32d88b.jpg" class="ob-img">
          <div class="ob-title">Unlock The Grid</div>
          <div class="ob-desc">Discover exclusive parties and underground events.</div>
      </div>
      <div class="onboarding-slide" data-step="1">
          <img src="https://i.pinimg.com/736x/91/08/6c/91086ccf3e1bfb69f65f6f40ddb95ab7.jpg" class="ob-img">
          <div class="ob-title">Digital Access</div>
          <div class="ob-desc">No papers. Your unique QR pass is your ticket.</div>
      </div>
      <div class="onboarding-slide" data-step="2">
          <img src="https://i.pinimg.com/736x/65/01/56/650156cfbbd490637236464385fdc5fb.jpg" class="ob-img">
          <div class="ob-title">Control the Night</div>
          <div class="ob-desc">Host your own drops and manage guest lists.</div>
      </div>

      <div class="ob-dots">
          <div class="ob-dot active"></div><div class="ob-dot"></div><div class="ob-dot"></div>
      </div>

      <button class="btn-main" style="width: 80%;" onclick="nextOnboarding()">NEXT</button>
  </div>

  <header class="app-header">
    <a href="#" class="brand"><div class="brand-mark"></div>GigByCity</a>
    <div class="user-pill" onclick="switchView('settings', document.getElementById('settingsDockItem'))">
        <span id="headerName">GUEST</span>
        <div class="avatar-circle" id="headerAvatar">G</div>
    </div>
  </header>

  <div id="viewHome" class="view-section active">
    <section class="hero">
        <div class="hero-carousel">
            <div class="carousel-track" id="heroTrack">
                <div class="hero-slide active">
                    <img src="https://i.pinimg.com/736x/ac/fa/07/acfa075232e1fa71a0546c9112b6f877.jpg" class="hero-bg">
                    <div class="hero-overlay"></div>
                    <div class="hero-content">
                        <div class="live-badge"><div class="pulse-dot"></div> LIVE NOW</div>
                        <h2 class="hero-title">HOUSE PARTY'S</h2>
                        <p class="hero-desc">Experience the underground.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="search-sticky-container">
        <div class="search-bar-modern">
            <svg class="icon-sm" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
            <input type="text" class="search-input-modern" placeholder="Search events..." onkeyup="handleSearch(this.value)">
            <button onclick="openFilterModal()" style="background:none; border:none; padding:10px;"><svg class="icon-sm" viewBox="0 0 24 24"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></svg></button>
        </div>
    </div>

    <div id="clubsContainer" class="feed"></div>
  </div>

  <div id="viewPasses" class="view-section">
      <div style="padding: 20px; font-size:1.8rem; font-weight:800;">My Passes</div>
      <div id="passesContainer" class="feed"></div>
  </div>

  <div id="viewHost" class="view-section">
      <div style="padding: 20px; font-size:1.8rem; font-weight:800;">Host Dashboard</div>
      <div id="hostContainer" class="feed"></div>
  </div>

  <div id="viewSettings" class="view-section">
      <div style="padding: 20px; font-size:1.8rem; font-weight:800;">Profile</div>
      <div style="padding: 0 20px;">
          <div id="settingsAvatarDisplay" class="avatar-circle" style="width:100px; height:100px; margin:0 auto 24px; font-size:2rem;"></div>
          <form onsubmit="saveProfile(event)" class="card" style="padding:24px; background:white; border-radius:24px;">
              <div class="form-section">
                  <label class="form-label">Name</label>
                  <input type="text" id="pName" class="inp-plain" style="border-bottom:1px solid var(--border);" required>
              </div>
              <div class="form-section">
                  <label class="form-label">Email</label>
                  <input type="email" id="pEmail" class="inp-plain" disabled>
              </div>
              <button type="submit" class="btn-main">SAVE CHANGES</button>
          </form>
          <button onclick="logout()" class="btn-main" style="margin-top:20px; background:rgba(230,25,25,0.1); color:var(--accent);">LOG OUT</button>
      </div>
  </div>

  <div class="dock-container">
    <div class="dock">
        <div class="dock-item active" onclick="switchView('home', this)"><svg class="icon" viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path></svg></div>
        <div class="dock-item" onclick="switchView('passes', this)"><svg class="icon" viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2"></rect></svg></div>
        <div class="dock-fab" id="createBtn" onclick="openCreateModal()" style="display:none;"><svg class="icon" viewBox="0 0 24 24" stroke="white"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg></div>
        <div class="dock-item" id="hostTab" onclick="switchView('host', this)" style="display:none;"><svg class="icon" viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg></div>
        <div class="dock-item" id="settingsDockItem" onclick="switchView('settings', this)"><svg class="icon" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg></div>
    </div>
  </div>

  <div id="hostDetailModal" class="overlay">
    <div class="sheet"><div class="sheet-handle"></div><div class="sheet-body" id="hostDetailContent"></div></div>
  </div>

  <div id="numpadModal" class="overlay">
      <div class="sheet">
          <div class="sheet-handle"></div>
          <div class="sheet-body">
              <div class="numpad-display" id="numpadDisplay">_ _ _ _ _ _</div>
              <div class="numpad-grid">
                  <button class="num-btn" onclick="pressNum(1)">1</button><button class="num-btn" onclick="pressNum(2)">2</button><button class="num-btn" onclick="pressNum(3)">3</button>
                  <button class="num-btn" onclick="pressNum(4)">4</button><button class="num-btn" onclick="pressNum(5)">5</button><button class="num-btn" onclick="pressNum(6)">6</button>
                  <button class="num-btn" onclick="pressNum(7)">7</button><button class="num-btn" onclick="pressNum(8)">8</button><button class="num-btn" onclick="pressNum(9)">9</button>
                  <button class="num-btn" onclick="clearNum()">C</button><button class="num-btn" onclick="pressNum(0)">0</button><button class="num-btn" onclick="submitManualCode()">OK</button>
              </div>
          </div>
      </div>
  </div>

  <div id="toast" class="toast"><div class="toast-icon"></div><span id="toastMsg">Notification</span></div>

</body>
</html>